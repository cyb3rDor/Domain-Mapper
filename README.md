Network-Security ‚Äî Domain Mapper Project - Practical TCP/UDP reconnaissance & AD-aware enumeration

One-liner: compact Bash automation for host discovery, TCP/UDP port sweeps, service/version scans, domain & share enumeration and credential-checking workflows for lab use on Kali Linux.

üîç Overview
Interactive script that: discovers live hosts (nmap), runs masscan for wide TCP/UDP port discovery, aggregates open ports per-host for targeted nmap -sV service scans, runs selected NSE scripts, enumerates domain/share info (smbmap / crackmapexec) when AD credentials provided, performs password-spraying style checks and AS-REP roasting & cracking (impacket + john). Produces consolidated text report and PDF.

üîß Features (exact to this script)

Interactive prompts: target (IP/CIDR), Domain name, optional AD user/password, password list, output dir.

Scanning levels: Basic (nmap -Pn), Intermediate (masscan TCP all ports), Advanced (masscan UDP).

Aggregation: merges masscan outputs into open_ports_to_scan.txt / open_UDP_ports_to_scan.txt with IP:port,port,... format for targeted nmap -sV.

Enumeration: per-host nmap -sV outputs (NMAPT_<IP>.txt), DNS/LDAP/DHCP detection, SMB/OS discovery NSE scripts (os-discovery, vuln-ms17-010, nbstat).

AD-aware advanced enumeration (when AD creds provided): crackmapexec to extract users/groups/shares, password policy, disabled/never-expire accounts, Domain Admins members.

Exploitation helpers included: NSE vuln scans (vuln category), password spraying (crackmapexec --continue-on-success), AS-REP roast via GetNPUsers.py (impacket) + john cracking.

Final consolidated outputs: final_results.txt and output.pdf (enscript + ps2pdf conversion).

üìÅ Project structure (as generated by script)

TMagen773637.s23.zx305.sh ‚Äî main script (executable). 

TMagen773637.s23.zx305

<output_dir>/ (created at runtime) contains:

user_inputs_summary.txt

NMAPB_BASIC_RES.txt (basic nmap output)

LIVE_HOSTS.txt

MASSCAN_TCP.txt, MASSCAN_UDP.txt

open_ports_to_scan.txt, open_UDP_ports_to_scan.txt

NMAPT_<IP>.txt (per-host -sV results)

nse_scripts/*.txt (os-discovery, vuln-ms17-010, nbstat)

groups_and_users/*, password_spraying/*, kerb/* (advanced outputs)

final_results.txt, output.pdf

‚öôÔ∏è Requirements (taken from script)

nmap, masscan, smbmap, crackmapexec, python3-impacket (GetNPUsers.py), john, enscript, ps2pdf, zip, wget, sudo.

Run with sudo when using masscan (raw sockets) or for auto-install attempts.

üöÄ Quick start

chmod +x TMagen773637.s23.zx305.sh
# recommended: run with sudo for masscan and some actions
sudo ./TMagen773637.s23.zx305.sh


üí° Example interactive flow

Enter target: 192.168.223.0/24

Domain name (optional): netsec.local

AD user (optional): pentestme / password

Password list (or press Enter ‚Üí /usr/share/wordlists/rockyou.txt)

Output dir: SCAN_RESULTS

Choose Scanning/Enumeration/Exploitation levels: 1 / 2 / 3

Script runs stages and writes final_results.txt + output.pdf under SCAN_RESULTS/.

üîê Important notes & clarifications (exact)

This script does not call SearchSploit, Hydra or Medusa ‚Äî stoplists/wordlists and cracking rely on john + GetNPUsers.py and crackmapexec flows present in the script.

If AD creds are not provided, Advanced Enumeration / Advanced Exploitation steps are skipped.

If LIVE_HOSTS.txt is empty, scanning stage failed/blocked ‚Äî check network reachability and nmap parameters.

If masscan errors: run with sudo and/or reduce --rate.

open_ports_to_scan.txt format is IP:port,port,... ‚Äî used by the script to run nmap -sV per host.

üõ† Troubleshooting quick tips

masscan permission error ‚Üí use sudo.

Missing GetNPUsers.py ‚Üí install python3-impacket package.

Empty domain files ‚Üí verify nmap outputs contained ldap strings or that the target network actually has a DC.
